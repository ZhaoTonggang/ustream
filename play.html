<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="./css/play.css" />
	</head>
	<body>
		<script src="https://cdn.staticfile.org/vue/2.6.11/vue.min.js"></script>
		<script src="https://cdn.staticfile.org/axios/0.19.2/axios.min.js"></script>
		<script src="./js/fastload.min.js"></script>
		<script src="./js/u2-player.min.js"></script>
		<u2-player id="player" autoplay="true" nop2p="false" screenshot="true"></u2-player>
		<script>
			const parseQuery = str => {
				if (!str) {
					return {};
				}
				const pairs = (str[0] === '?' ? str.substr(1) : str).split('&');
				const params = {};
				for (let i = 0; i < pairs.length; i++) {
					const pair = pairs[i].split('=');
					params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');
				}
				return params;
			};
			const query = parseQuery(location.search)
			if (!query.v) {
				document.body.innerHTML = '<p align="center">参数错误</p>';
			} else {
				var player = document.getElementById("player")
				player.setAttribute("v", query.v)
				if (query.audio && query.audio != 'false') {
					player.setAttribute('audio', "true");
				}
			}
		</script>
	</body>
</html>
